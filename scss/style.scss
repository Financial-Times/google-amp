$o-fonts-path: '//h2.ft.com/build/files/o-fonts-assets@1.3.0/';
$o-grid-ie8-rules: 'none';

@import 'o-colors/main';
@import 'o-fonts/main';
@import 'o-typography/main';
@import 'o-grid/main';

@include oFontsInclude(MetricWeb, light); // body
@include oFontsInclude(MetricWeb, bold); // headings
@include oFontsInclude(FinancierDisplayWeb); // headings
@include oFontsInclude(FinancierDisplayWeb, $weight: light, $style: italic); // standfirst

$page-width: 30em;

$border-divider: 1px solid oColorsGetPaletteColor(pink-tint3);

@mixin responsiveWidth($width: $page-width) {
	margin: 0 auto;
	padding: 0 10px;
	max-width: $width;
}

body {
	@include oColorsFor(page, background);
	@include oTypographyBody;
}

.article {
	@include oTypographyBodyWrapper;

	@include responsiveWidth;
	.article__copyright-notice {
		@include oTypographySans(s);
	}
}

.main-header {
	margin-bottom: 1em;
	background: oColorsGetPaletteColor('grey-tint5');
	padding: .5em;
}

.main-header__container {
	position: relative;
}

.main-header-logo {
	@include responsiveWidth(16em);

	svg {
		display: block;
		max-height: 100%; // work around Webkit ridiculous height bug https://bugs.webkit.org/show_bug.cgi?id=82489
	}
}

.article-image {
	margin: 1em 0;
}

.article-header .article-image {
	border-bottom: $border-divider;
}

// HACK: override default styling of oTypographyBodyWrapper
// (rendered as '.article h1') using double classname specificity
.headline.headline {
	margin: 8px 0;

	@include oGridRespondTo(S, M) {
		font-size: 8vh;
		line-height: 8vh;
		@media (orientation: portrait) {
			font-size: 4vh;
			line-height: 4vh;
		}
	}
}

// HACK: override default styling of oTypographyBodyWrapper
// (rendered as '.article h1') using double classname specificity
.article-standfirst.article-standfirst {
	margin: 6px 0;
	@include oTypographyLead;

	@include oGridRespondTo(S, M) {
		font-size: 6vh;
		line-height: 6vh;
		@media (orientation: portrait) {
			font-size: 3vh;
			line-height: 3vh;
		}
	}
}

.article-dateline {
	@include oTypographySans(s);
}

.main-footer {
	border-top: 5px solid oColorsGetPaletteColor('grey-tint3');
	background: oColorsGetPaletteColor('grey-tint5');
	padding: .5em;
}

.main-footer__container {
	@include responsiveWidth;
	text-align: center;
}

.main-footer__links {
	margin: 0;
	padding: 0 0 1em;
	list-style: none;
}

.main-footer__link {
	@include oTypographySans(s);

	color: oColorsGetPaletteColor('pink');

	@include oGridRespondTo(S) {
		display: inline;

		&::after {
			content: ' | ';
		}

		&:last-child::after {
			content: '';
		}
	}

	a {
		color: inherit;
	}
}

// next-article component styles
.c-box {
	position: relative;
	clear: left;
	margin: 24px 0 16px;
	padding: 16px 0;
	width: 100%;

	box-sizing: border-box;
}

.c-box--inline {
	float: left;

	@include oGridRespondTo(S) {
		margin-right: 24px;
		max-width: 300px;
	}
}

.c-box__title {
	margin: -40px 0 8px 10px;
}

.c-box__title-text {
	@include oColorsFor(page, background);
	@include oTypographySerifDisplay(m);
	display: inline-block;
	margin: 0;
	padding: 10px;
	padding-bottom: 0;
	font-weight: 900;

	a {
		border-bottom: 0;
		text-decoration: none;
		color: oColorsGetPaletteColor('cold-1');
	}
}

.u-border--all {
	border: 1px solid oColorsGetPaletteColor('warm-3');
}

.u-border--left {
	border-left: 1px solid oColorsGetPaletteColor('warm-3');
}

.u-margin--left-right {
	margin-right: 16px;
	margin-left: 16px;
}

.u-padding--left-right {
	padding-right: 16px;
	padding-left: 16px;
}

.aside--headline {
	@include oTypographySansDataBold(xl);
	margin-top: 8px;
	margin-bottom: 8px;
	color: oColorsGetPaletteColor('cold-3');

	p {
		margin: 0;
	}
}

.aside--content p {
	margin: 5px 0 0;
}

.aside--image img {
	display: block;
	margin-right: auto;
	margin-left: auto;
	max-width: 100%;
}

.aside--list {
	margin: 10px 0;
	padding-left: 20px;
}

%article-quote::before {
	@include oTypographySerifDisplay(s);
	display: inline-block;
	vertical-align: -.5em; // sit around the baseline
	line-height: inherit;
	font-size: 80px; // enormous quote
	content: '\201C';
}

.pull-quote__quote-marks {
	@extend %article-quote;

	position: absolute;
	top: -1px; // place just on top of border
	left: 10px;
	background-color: oColorsGetPaletteColor('pink');
	padding: 0 10px;
	line-height: 0; // take up as little space as possible
}

.article__quote--full-quote {
	@extend %article-quote;
	line-height: 0; // take up as little space as possible
}

.article__quote-footer {
	@include oTypographySansBold(s);
}

.related-content {
	@include responsiveWidth;
	margin-top: 40px;
}

.related-content__header {
	@include oTypographySerifDisplay(m);
}

.related-content__stories {
	@include oGridRow();

	// Should we use a CSS reset?
	padding: 0;
}

.related-content__story {
	@include oGridColspan((default: 12, M: 6));
	margin-bottom: oGridGutter(L);

	@include oGridRespondTo(M) {
		display: flex;
	}
}

.related-content__lead-story {
	display: none;
	@include oGridRespondTo(M) {
		@include oGridColspan((default: 12));
		@include oGridRespondTo(M) {
			padding-left: oGridGutter(L) * 2;
		}
	}

	.related-content__container {
		@include oGridRow();
		@include oGridRespondTo(M) {
			margin-left: oGridGutter(L) * -1;
		}
	}

	.related-content__content,
	.related-content__image {
		@include oGridColspan((default: 6));
	}

	.related-content__content {
		@include oGridRespondTo(M) {
			padding-left: 0;
			padding-right: oGridGutter(L) / 2;
		}
	}

	.related-content__image {
		@include oGridRespondTo(M) {
			padding: 0;
			margin: oGridGutter(L) / 2 * -1 0;
			position: relative;
			right: oGridGutter(L) / 2 * -1;
		}
	}
}

.related-content__lead-story-alternate {
	@include oGridRespondTo(M) {
		display: none;
	}
}

.related-content__container {
	background-color: oColorsGetColorFor(box, background);
	border: 1px solid oColorsGetPaletteColor("warm-3");
	padding: oGridGutter(S);

	@include oGridRespondTo(M) {
		width: 100%;
	}
}

.related-content__link {
	@include oTypographyLink;
	@include oTypographySans(m);
	display: block;
}

.related-content__date {
	@include oTypographySans(xs);
}

.related-content__summary {
	@include oTypographySans(s);
	margin: 0;
}

.related-content__theme {
	@include oTypographySansBold(s);
	color: oColorsGetPaletteColor(claret);
	margin: 0;
}

.more-ons {
	@include responsiveWidth;
	margin-top: 40px;
}

.more-ons__items {
	@include oGridRow();

	// Should we use a CSS reset?
	padding: 0;
}

.more-ons__item {
	@include oGridColspan((default: 12, M: 6));
}

.more-ons__item-wrapper {
	border: 1px solid oColorsGetPaletteColor('warm-3');
	padding: oGridGutter(L) oGridGutter(L) 0;
	margin-bottom: oGridGutter(L);
}

.more-ons__type {
	margin: -40px 0 8px 10px;
}

.more-ons__header {
	@include oTypographySansBold(l);
	color: oColorsGetPaletteColor(claret);
	margin-top: 0;
}

.more-ons__header,
.more-ons__stories {
	padding: 0;
}

.more-ons__stories {
	list-style: none;
}

.more-ons__story {
	margin-bottom: oGridGutter(L);
}

.more-ons__link {
	@include oTypographyLink;
	@include oTypographySans(m);
	display: block;
}

.more-ons__date {
	@include oTypographySans(xs);
}

.more-ons__image {
	margin: 0 oGridGutter(L) * -1 oGridGutter(L);
}


// Barriers, access
.access-mocked {
	position: absolute;
	background: pink;
	font-size: 10px;
	top: 0;
	width: 30%;
	line-height: 1em;
	padding: 2px;
	min-width: 90px;
}

.amp-access-login {
	@include responsiveWidth;
	color: oColorsGetPaletteColor(grey-tint5);
	margin-top: 30px;
	margin-bottom: 30px;

	@include oGridRespondTo(M) {
		margin-top: 60px;
		margin-bottom: 80px;
	}
}

.amp-access-login__header,
.amp-access-login__body {

	@include oGridRespondTo(M) {
		margin: 0 40px;
	}
}

.amp-access-login__header {
	background-color: oColorsGetPaletteColor(warm-5);
	padding: 20px;
}

.amp-access-login__header-instruction {
	font-weight: bold;
}

.amp-access-login__body {
	background-color: oColorsGetPaletteColor(pink-tint1);
	padding: 30px;
	text-align: center;
}

.amp-access-login__button {
	background-color: oColorsGetPaletteColor(teal-1);
	display: inline-block;
	padding: 10px;
	cursor: pointer;
	color: white;
	border-radius: 5px;
	margin: 0 auto;
}

.amp-access-nav {
	text-align: right;
	margin: 0.5em 0 0;

	@include oGridRespondTo(M) {
		position: absolute;
		right: 0;
		bottom: 0;
		margin: 0;
	}
}

.amp-access-nav__links {
	margin: 0;
}

.amp-access-nav__link-item {
	display: inline-block;
	position: relative;

	&:not(:first-child):before {
		content: ' ';
		position: absolute;
		width: 2px;
		height: 14px;
		top: 50%;
		left: -3px;
		margin-top: -4px;
		background-color: oColorsGetPaletteColor('warm-5');

		&:first-of-type {
			display: none;
		}
	}
}

.amp-access-nav__link {
	color: white;
	@include oTypographySans(s);
	text-decoration: none;
	padding: 0 0.5em;
	cursor: pointer;
}
